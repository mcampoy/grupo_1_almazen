<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head') %>
</head>

<body>
    <!-- HEADER -->
    <%- include("partials/header") %>
    <!-- /HEADER -->

    <!-- Redes Sociales Flotantes-->
    <%-include('partials/redesSociales') %>

    <!-- Contenedor de receta -->
    <article class="container container-details">
        <div class="row box-product-details">

            <!-- Sitemap -->
            <div class="siteMap col-12">
                <span>Volver al listado | </span> <a href="/">Home</a> <span> > </span><a href="/recetas/">Recetas</a>
                <span> > </span><a href="/recetas/dieta/<%= receta.dieta %>"><%= receta.dieta %></a> <br><br>
            </div>

            <!-- Receta -->
            <section class="col-12 col-lg-6 descripcion-receta">
                <div class="encabezado-receta">
                    <p class="categoria-receta"><%= receta.dieta %> </p>
                    <h3 class="titulo-receta mb-2"><%= receta.nombre %> </h3>
                    <span class="tiempo-coccion"><i class="far fa-clock"></i> <span class="reloj">
                            <%= receta.tiempo_coccion %> minutos </span> </span>
                    <span class="dificultad"> <span class="dificulad"> - <i class="fas fa-utensil-spoon"></i>
                            <%= receta.dificultad %> </span> </span>
                </div>
                <figure class="imagen-receta">
                    <% if (receta.dieta == "sin gluten") { %>
                    <!-- Sin es sin gluten añade el logo de sin tacc -->
                    <img src="/images/recetas/<%= receta.image %>" alt=" <%= receta.nombre %> " class="imagen-receta">
                    <img class="singlutenLogo-recetas sg-logo-receta" src="/images/logos/sintaccLogo.png"
                        alt="Logo de productos sin gluten">

                    <% } else { %>
                    <img src="/images/recetas/<%= receta.image %>" alt=" <%= receta.nombre %> " class="imagen-receta">
                    <% } %>
                </figure>

                <div class="descripcion_receta">
                    <p><%= receta.descripcion%> </p>
                </div>

                <div class="productos-receta">
                    <h4>Nuestro productos para esta receta</h4>

                    <div class="products-carrousel">

                        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active contenedor-presentacion">
                                    <img class="d-block w-100 presentacion-carrousel-prod" src="/images/Logo.svg"
                                        alt="First slide">
                                </div>
                                <% for( let product of products ) { %>
                                <div class="carousel-item">
                                    <a class="prod-carrousel" href="../product/details/<%= product.id %> ">
                                        <figure class="product-box_image">
                                            <img class="img-prod-carrousel" src="/images/<%= product.image %>"
                                                alt="Second slide">
                                        </figure>
                                        <div class="info-prod-carrousel">
                                            <h2 class="titulo_producto nombre_producto_receta"><%= product.nombre %>
                                                <span class="precio_producto-carrousel"> $<%= product.precio %> </span>
                                            </h2>
                                        </div>
                                    </a>
                                </div>
                                <% } %>

                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                                data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                                data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <div class="col-12 col-lg-6">
                <div class="description-wrapper-details">
                    <section class="col-12 product-details">
                        <div class="short-description-receta">

                            <!-- Acciones -->
                            <div class="acciones-receta">
                                <a class="accion-receta favorito" href="#" title=" Me gusta">
                                    <i class="far fa-heart"></i>
                                </a>
                                <a class="accion-receta agregar" href="#" title="Agregar a mis recetarios">
                                    <i class="fas fa-book"></i>
                                </a>
                                <a class="accion-receta compartir" href="#" title="Compartir">
                                    <i class="fas fa-share-alt"></i>
                                </a>
                                <button type="button" class="boton  boton-central-receta" data-toggle="modal"
                                    data-target="#lista-compras">
                                    <i class="fas fa-tasks"></i>
                                </button>
                            </div>

                            <!-- /Acciones -->


                            <form class="ingredientes-receta" method="#" action="#">
                                <h2 class="titulo-ingredientes-receta">Ingredientes</h2>
                                <h3 class="cantidad-porciones-receta">Para <select id="slcCantidad"
                                        class="numero-cantidad-porciones-receta">
                                        <!-- <div class="titulo-ajustar-porciones-receta">Ajustar porciones:</div> -->

                                        <option value="default">hacer esta</option>
                                        <option id="mitad" value="/2">la mitad de la</option>
                                        <option value="*2">el doble de la</option>
                                        <option value="triple">el triple de la</option>
                                        <option value="cuádruple">el cuádruple de la</option>

                                    </select> preparación</h3>

                                <!-- INGREDIENTES -->
                                <% for( let ingrediente of receta.ingredientes ) { %>

                                <div class="ingrediente-receta checkbox">

                                    <label class="label-check">
                                        <input class="check checkbox-original checkbox-ingrediente-receta"
                                            type="checkbox" name="ingredientes" value="">
                                        <span class="checkbox-reemplazo checkbox-ingrediente-receta"></span>
                                        <span class="cantidad-ingrediente-receta"> <%= ingrediente.cantidad %></span>
                                        <span class="unidad-ingrediente-receta"> <%= ingrediente.unidad %> </span>
                                        <span class="descripcion-ingrediente-receta">
                                            <%= ingrediente.nombre_ingrediente %></span>
                                    </label>
                                </div>

                                <% } %>

                                <!-- Checkbox para seleccionar todos los ingredientes -->
                                <div class="checkbox">
                                    <label class="label-seleccionar-todos">
                                        <i class="fas fa-tasks"></i> <input id="checkAll"
                                            class="check checkbox-original checkbox-seleccionar-todos" type="checkbox">
                                        <span class="checkbox-reemplazo"></span>
                                        Seleccionar todos
                                    </label>
                                </div>

                                <button type="submit" class="boton  boton-central-receta" data-toggle="modal"
                                    data-target="#lista-compras">
                                    Agregar a lista de compras
                                </button>

                                <!-- MODAL: LSITA DE COMPRAS -->
                                <div class="modal fade" id="lista-compras" tabindex="-1" role="dialog"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Lista de compras</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                ...
                                            </div>
                                            <!-- <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary">Save changes</button>
                                                </div> -->
                                        </div>
                                    </div>
                                </div>
                                <!-- / MODAL: LSITA DE COMPRAS -->
                            </form>

                            <!-- PREPARACIÓN -->
                            <div class="preparacion-receta">
                                <h2 class="titulo-preparacion-receta">Preparación</h2>
                                <h3 class="subtitulo-preparacion-receta">Seguí los pasos de la receta aquí y tachá los que ya completaste o miralos en la vista
                                    de cocina.</h3>


                                <% for( let i = 0; i < receta.pasos.length; i++ ) { %>

                                <div class="pasos-preparacion-receta">
                                    <div class="paso-preparacion-receta">
                                        <label for="checkbox-original" class="label-pasos" style="line-height: 1.6em;">
                                            <input class="checkbox-original checkbox-paso-preparacion-receta"
                                                type="checkbox">
                                            <span class="checkbox-reemplazo checkbox-paso-preparacion-receta"></span>
                                            <span class="numero-paso-preparacion-receta"> <%= i + 1 %>. </span>
                                            <span id="paso" class="paso-receta"> <%= receta.pasos[i] %>
                                                </span>
                                        </label>
                                    </div>
                                </div>
                                <% } %>

                                <button type="button" class="boton boton-central-receta" data-toggle="modal"
                                    data-target="#pasos">
                                    Vista de cocina
                                </button>
                            </div>

                            <!-- MODAL: VISTA DE COCINA -->
                            <div class="modal fade" id="pasos" tabindex="-1" role="dialog"
                                aria-labelledby="modalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>

                                        <!-- HEADER MODAL -->
                                        <div class="modal-header modal-header-receta">
                                            <h5 class="modal-title" id="exampleModalLongTitle"><%= receta.nombre %>
                                            </h5>
                                            <h6 class="procedimientos"> </span> <span>Total de pasos a seguir:</span>
                                                <br><br> <span class="cantidad_pasos"><%= receta.pasos.length %> </h6>
                                        </div>

                                        <!-- BODY MODAL -->
                                        <div class="modal-body">
                                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="false"
                                                data-interval="false">
                                                <ol class="carousel-indicators">
                                                    <% for( let i = 0; i <= receta.pasos.length; i++ ) { %>

                                                    <li data-target="#carouselExampleIndicators"
                                                        data-slide-to="<% [i] %> " class="active"></li>
                                                    <% } %>
                                                </ol>
                                                <div class="carousel-inner">
                                                    <div class="carousel-item active">
                                                        <div class="paso-carrusel">
                                                            <span class="numero-paso-carrusel"></span>
                                                        </div>

                                                        <!-- PRESENTACIÓN DE PASOS -->
                                                        <p class="descripcion-paso-carrusel instruccion_carrusel">
                                                            Desplázate hacia la derecha para ir viendo los pasos de esta
                                                            deliciosa receta. <br></p>
                                                        <img src="/images/horneando.svg" alt="" class="horneando">
                                                    </div>

                                                    <!-- PASOS -->
                                                    <% for( let i = 0; i < receta.pasos.length; i++ ) { %>
                                                    <div class="carousel-item ">
                                                        <div class="paso-carrusel">
                                                            <span class="numero-paso-carrusel"><%= i + 1  %> </span>
                                                            <p class="descripcion-paso-carrusel"> <%= receta.pasos[i] %>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <% } %>

                                                </div>

                                                <!-- BOTONES PREVIO Y SIGUIENTE -->
                                                <a class="carousel-control-prev" href="#carouselExampleIndicators"
                                                    role="button" data-slide="prev">
                                                    <span class="receta-prev carousel-control-prev"
                                                        aria-hidden="true"><i class="fas fa-arrow-left"></i></span>
                                                    <span class="sr-only">Previous</span>
                                                </a>
                                                <a class="carousel-control-next" href="#carouselExampleIndicators"
                                                    role="button" data-slide="next">
                                                    <span class="receta-next carousel-control-next"
                                                        aria-hidden="true"><i class="fas fa-arrow-right"></i></span>
                                                    <span class="sr-only">Next</span>
                                                </a>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>
                    </section>
                </div>
            </div>
        </div>
    </article>

    <!-- /Receta -->

    <!-- FOOTER -->
    <%- include("partials/footer") %>
    <!-- /FOOTER -->

    <!-- Scripts -->
    <script>

        let pasos = document.querySelectorAll('.paso-receta')
        console.log(pasos);

        for (const paso of pasos) {

            paso.addEventListener('click', function () {
                paso.classList.toggle('tachado')
            })

        }
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>
    <script>
        $("#checkAll").click(function () {
            $(".check").prop('checked', $(this).prop('checked'));
        });
    </script>
    <!-- /Scripts -->
    </div>

</body>

</html>